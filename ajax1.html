<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ajax 1 - Text File</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <button id="button">Get Text File</button>
    <br><br>
    <div id="text"></div>
    <script>
        //create event listener
    document.getElementById('button').addEventListener('click', loadText);

    function loadText(){
        //Create XHR obect
         var xhr= new XMLHttpRequest();
         // OPEN - type, url/ file, async
         xhr.open('GET', 'sample.txt',true);
         console.log('READY_STATE', xhr.readyState);

         //OPTIONAL - used for loaders
        xhr.onprogress = function(){
        console.log('READY_STATE', xhr.readyState);
        }

        // difference between onload and onreadystatechange is that readyState property need to be eq to 4
         xhr.onload = function(){
            if(this.status == 200){
               console.log('READY_STATE', xhr.readyState);
               document.getElementById('text').innerHTML = this.responseText;
            }else if(this.status == 404){
                document.getElementById('text').innerHTML = 'Not found';
            }
         }

      // xhr.onreadystatechange = function(){
      //   console.log('READYSTATE: ', xhr.readyState);
      //   if(this.readyState == 4 && this.status == 200){
      //     //console.log(this.responseText);
      //   }
      // }

         xhr.onerror =  function(){
             console.log('Request error...');
         }
         //sends request
         xhr.send();
    }

    //readyState values
    //0: request not initialized
    //1: server connection established
    //2: process recieved
    //3: processing request
    //4: request finished and response is ready
    </script>

</body>
</html>  